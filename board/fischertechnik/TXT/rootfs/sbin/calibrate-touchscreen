#!/bin/sh

calibrate() {
	TSLIB_TSDEVICE=/dev/input/event0 /usr/bin/ts_calibrate
	touch /etc/.reset-touchscreen-calibration
}

commit() {
	rm -f /home/ftc/.reset-touchscreen-calibration
}

reset() {
	cp -f /media/sdcard/root/etc/pointercal /etc/pointercal
	commit
}

case "$1" in
        calibrate)
                calibrate
                ;;
        commit)
                commit
                ;;

        reset)
                reset
                ;;

        is-uncommitted)
                if [ -f /home/ftc/.reset-touchscreen-calibration ]; then
                    exit 0;
                 else
                    exit 1;
                 fi
                 ;;

        *)
                echo "Usage: $0 {calibrate|commit|reset}"
                exit 1
esac
